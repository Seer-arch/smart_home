# 智能家居系统

## 项目简介
本项目是一个基于 FastAPI 的智能家居系统，提供完整的 API 接口用于管理智能家居设备、记录使用数据、分析用户行为等。系统通过数据分析和可视化，帮助用户了解设备使用模式和优化家居管理。

## 系统功能
1. 设备管理
   - 设备信息管理（添加、删除、修改、查询）
   - 设备使用记录
   - 设备状态监控

2. 用户管理
   - 用户认证与授权
   - 用户信息管理
   - 用户反馈记录

3. 场景管理
   - 场景创建与管理
   - 场景触发记录
   - 场景使用统计

4. 数据分析
   - 设备使用频率分析
   - 使用时间段分析
   - 用户使用习惯分析
   - 房屋面积影响分析
   - 自动化控制分析

## 技术实现
- 后端框架：FastAPI
- 数据库：PostgreSQL
- ORM：SQLAlchemy
- 认证：JWT
- 可视化：Matplotlib

## 安装部署
1. 环境要求
   - Python 3.8+
   - PostgreSQL 12+

2. 安装步骤
```bash
# 克隆项目
git clone [项目地址]
cd smart_home_system

# 安装依赖
pip install -r requirements.txt

# 配置数据库
# 修改 app/core/config.py 中的数据库连接信息

# 初始化数据库
python init_db.py

# 初始化测试数据
python init_test_data.py
```

3. 启动服务
```bash
uvicorn app.main:app --reload
```

## API 文档
- Swagger UI: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc

## 数据分析功能
系统提供以下数据分析功能，所有分析结果都通过 API 接口返回，并支持可视化展示：

1. 设备使用分析
   - 使用频率分析：统计各设备的使用次数和频率
   - 时间段分析：分析设备在24小时内的使用分布
   - 使用趋势分析：展示最近30天的使用变化趋势

2. 用户行为分析
   - 使用习惯分析：识别设备使用的关联性
   - 场景偏好分析：分析用户对不同场景的使用偏好
   - 自动化使用分析：对比自动控制和手动控制的使用情况

3. 环境影响分析
   - 环境因素分析：分析温度、湿度等环境因素对设备使用的影响
   - 使用效率分析：评估不同环境条件下的设备使用效率

## 可视化设计
1. 数据展示方式
   - 时间序列数据：使用折线图展示趋势变化
   - 分布数据：使用柱状图展示使用分布
   - 占比数据：使用饼图展示场景分布
   - 多维度数据：使用3D散点图展示环境因素影响
   - 对比数据：使用并排柱状图展示控制方式对比

2. 可视化优化
   - 添加网格线提高可读性
   - 优化图表尺寸和布局
   - 添加数据标签
   - 使用中文标签

## 测试账号
- 管理员账号：test@example.com
- 密码：test123

## 注意事项
1. 系统仅提供 API 接口，不包含前端界面
2. 所有数据分析和可视化结果通过 API 获取
3. 确保数据库服务正常运行
4. 建议使用虚拟环境运行项目