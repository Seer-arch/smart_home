# 智能家居系统

## 项目简介
本项目是一个基于 FastAPI 的智能家居系统，提供完整的 API 接口用于管理智能家居设备、记录使用数据、分析用户行为等。系统通过数据分析和可视化，帮助用户了解设备使用模式和优化家居管理。

## 系统功能
1. 设备管理
   - 设备信息管理（添加、删除、修改、查询）
   - 设备使用记录
   - 设备状态监控

2. 用户管理
   - 用户认证与授权
   - 用户信息管理
   - 用户反馈记录

3. 场景管理
   - 场景创建与管理
   - 场景触发记录
   - 场景使用统计

4. 数据分析
   - 设备使用频率分析
   - 使用时间段分析
   - 用户使用习惯分析
   - 房屋面积影响分析
   - 自动化控制分析

## 技术实现
- 后端框架：FastAPI
- 数据库：PostgreSQL
- ORM：SQLAlchemy
- 认证：JWT
- 可视化：Matplotlib

## 安装部署
1. 环境要求
   - Python 3.8+
   - PostgreSQL 12+

2. 安装步骤
```bash
# 克隆项目
git clone https://github.com/Seer-arch/smart_home.git
cd smart_home_system

# 安装依赖
pip install -r requirements.txt

3. 启动服务
```bash
uvicorn app.main:app --reload
```

## API 文档
- Swagger UI: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc

## 数据分析功能
系统提供以下数据分析功能，所有分析结果都通过 API 接口返回，并支持可视化展示：

1. 设备使用分析
   - 使用频率分析：统计各设备的使用次数和频率
   - 时间段分析：分析设备在24小时内的使用分布
   - 使用趋势分析：展示最近30天的使用变化趋势

2. 用户行为分析
   - 使用习惯分析：识别设备使用的关联性
   - 场景偏好分析：分析用户对不同场景的使用偏好
   - 自动化使用分析：对比自动控制和手动控制的使用情况

3. 环境影响分析
   - 环境因素分析：分析温度、湿度等环境因素对设备使用的影响
   - 使用效率分析：评估不同环境条件下的设备使用效率

## 可视化设计
系统设计了以下子问题并通过可视化方式展示分析结果：

1. 设备使用模式分析
   - 问题：用户在不同时间段使用设备的规律是什么？
   - 实现：通过24小时时间分布图，展示设备使用的高峰时段和低谷时段
   - 价值：帮助用户了解设备使用的时间规律，优化使用计划

2. 设备使用趋势分析
   - 问题：设备使用频率如何随时间变化？
   - 实现：通过30天趋势图，展示设备使用的长期变化趋势
   - 价值：发现设备使用的周期性规律，预测未来使用需求

3. 场景使用偏好分析
   - 问题：用户更倾向于在哪些场景下使用设备？
   - 实现：通过场景分布饼图，展示不同场景下的设备使用比例
   - 价值：了解用户场景偏好，优化场景设置

4. 环境因素影响分析
   - 问题：温度、湿度等环境因素如何影响设备使用？
   - 实现：通过3D散点图，展示环境因素与设备使用的关系
   - 价值：发现环境因素对设备使用的影响规律，优化环境控制

5. 自动化控制效果分析
   - 问题：自动化控制相比手动控制的效果如何？
   - 实现：通过并排柱状图，对比自动化控制和手动控制的使用次数和能源消耗
   - 价值：评估自动化控制的效果，优化控制策略

## 测试账号
- 管理员账号：test@example.com
- 密码：test123

## 注意事项
1. 系统仅提供 API 接口，不包含前端界面
2. 所有数据分析和可视化结果通过 API 获取
3. 确保数据库服务正常运行
4. 建议使用虚拟环境运行项目